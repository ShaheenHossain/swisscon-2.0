<?xml version="1.0" encoding="utf-8"?>
<swiss>
    <data>
        <template id="assets_common" name="eagle_template_report" inherit_id="web.report_assets_common">
            <xpath expr="." position="inside">
                <link rel="stylesheet" type="text/scss" href="/eagle_templates/static/src/scss/layout_custom.scss"/>
            </xpath>
        </template>
        <!--inherit company report style-->
        <template id="styles_company_report_inherit" inherit_id="web.styles_company_report" primary="True">
            <!--            <xpath expr="//t[@t-elif='slide.is_preview and not channel.is_member']/span/span" position="replace">-->
            <xpath expr="//t[@t-elif=&quot;layout == 'web.external_layout_boxed'&quot;]" position="before">
                <!--"layout == 'web.external_layout_boxed'"
                <xpath expr="//t[@t-elif]" position="before">-->
                <t t-elif="layout == 'eagle_templates.external_layout_custom'">
                    &amp;.o_custom_footer {
                    border-top: 1px solid<t t-esc='secondary'/>;
                    h4 {
                    color:<t t-esc='secondary'/>;
                    }
                    .pagenumber {
                    border: 1px solid<t t-esc='primary'/>;
                    background-color:<t t-esc='secondary'/>;
                    }
                    }
                    &amp;.o_report_layout_custom {
                    h1, h2, h3 {
                    color:<t t-esc='primary'/>;
                    }
                    strong {
                    color:<t t-esc='secondary'/>;
                    }
                    table {
                    thead {
                    color:<t t-esc='secondary'/>;
                    tr th {
                    border-top: 1px solid
                    <t t-esc='secondary'/>
                    !important;
                    }
                    }
                    tbody {
                    tr:last-child td {
                    border-bottom: 1px solid<t t-esc='secondary'/>;
                    }
                    }
                    }
                    #total {
                    strong {
                    color:<t t-esc='secondary'/>;
                    }
                    }
                    }
                </t>
            </xpath>
        </template>

        <template id="custom_address_layout">
        <t t-if="address">
            <div class="address row">
                <t t-if="information_block">
                    <div name="information_block">
                        <t t-raw="information_block"/>
                    </div>
                </t>
                <div name="address">
                    <t t-raw="address"/>
                </div>
            </div>
        </t>
    </template>

        <!--        todo this is a nw layout-->
        <template id="external_layout_custom">
            <div t-attf-class="header o_company_#{company.id}_layout" t-att-style="report_header_style">
                <div class="o_custom_header">
                    <div class="row">
                        <div class="col-12 text-right">
                            <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 180px;" alt="Logo"/>
                        </div>
                    </div>


<!--                    <div class="col-4 " name="company_address">-->
                    <div class="col-12 text-left text-muted" style="font-size: 12px !important;" name="company_address">
<!--                            <span class="company_address" t-field="company.partner_id"
                                  t-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/>-->

                                <ul class="list-inline mb4">
                                    <strong><li t-if="company.name" class="list-inline-item d-inline"><span t-field="company.name"/></li></strong>
                                    <li t-if="company.partner_id.street" class="list-inline-item d-inline"><span t-field="company.partner_id.street"/></li>
                                    <li t-if="company.partner_id.street2" class="list-inline-item d-inline"><span t-field="company.partner_id.street2"/></li>
    <!--                            <li t-if="company.partner_id.city" class="list-inline-item d-inline"><t t-esc="company.partner_id.city"/></li>-->
    <!--                            <li t-if="company.state_id" class="list-inline-item d-inline"><t t-esc="company.state_id"/></li>-->
    <!--                            <li t-if="company.zip" class="list-inline-item d-inline"><t t-esc="company.zip"/></li>-->
    <!--                            <li t-if="company.country_id" class="list-inline-item d-inline"><t t-esc="company.country_id"/></li>-->
                                </ul>


                        </div>
                </div>
            </div>

            <div t-attf-class="article o_report_layout_custom o_company_#{company.id}_layout col-12 ml-3"
                 t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id"
                 t-att-data-oe-lang="o and o.env.context.get('lang')">
                <t t-call="eagle_templates.custom_address_layout"/>
                <t t-raw="0"/>

            </div>


<!--
            <div t-attf-class="footer o_custom_footer o_company_#{company.id}_layout">
                <div class="row " >
                    <div class="col-2">
                        <img t-if="company.logo" width="100px" src="eagle_templates/static/img/khanPageQr.png" alt="Logo"/>
                    </div>

                    <div class="col-3">
                        <span t-field="company.report_footer"/>
                    </div>

                    <div class="col-4 text-right">
                        <span class="company_address" t-field="company.partner_id"
                              t-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/>
                    </div>

                    <div class="col-4">
                        <h4 class="mt0 mb0 text-uppercase" t-field="company.report_header"/>
                    </div>
                    <div class="col-1">
                        <ul t-if="report_type == 'pdf'" class="list-inline pagenumber float-right text-center">
                            <li class="list-inline-item">
                                <strong>
                                    <span class="page"/>
                                </strong>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
-->

                    <div t-attf-class="footer o_custom_footer o_company_#{company.id}_layout">
                        <div class="text-center" style="border-top: 1px solid black;">
                            <ul class="list-inline">
                                <li t-if="company.partner_id.name" class="list-inline-item"><strong><span style="font-size:10px" t-field="company.partner_id.name"/></strong></li>
                                <li t-if="company.partner_id.street" class="list-inline-item"><span style="font-size:10px" t-field="company.partner_id.street"/></li>
                                <li t-if="company.partner_id.street2" class="list-inline-item"><span style="font-size:10px" t-field="company.partner_id.street2"/></li>
                                <li t-if="company.email" class="list-inline-item"><small><strong>E-mail: </strong></small><span style="font-size:10px" t-field="company.email"/></li>
                                <li t-if="company.phone" class="list-inline-item"><small><strong>Telefon: </strong></small><span style="font-size:10px" t-field="company.phone"/></li>
                                <li t-if="company.website" class="list-inline-item"><small><strong>Website: </strong></small><span style="font-size:10px" t-field="company.website"/></li>
                                <li t-if="company.eu_vat_id_no" class="list-inline-item"><small><strong>EU-MwSt.-IdNr.: </strong></small><span style="font-size:10px" t-field="company.eu_vat_id_no"/></li>
                                <li t-if="company.eu_vat_id_no_02" class="list-inline-item"><small><strong>EU-MwSt.-IdNr.: </strong></small><span style="font-size:10px" t-field="company.eu_vat_id_no_02"/></li>
                                <li t-if="company.district_court" class="list-inline-item"><small><strong>Bezirksgericht: </strong></small><span style="font-size:10px" t-field="company.district_court"/></li>
                                <li t-if="company.commercial_register" class="list-inline-item"><small><strong>Handelsregister: </strong></small><span style="font-size:10px" t-field="company.commercial_register"/></li>
                                <li t-if="company.bank_name" class="list-inline-item"><small><strong>Bank: </strong></small><span style="font-size:10px" t-field="company.bank_name"/></li>
                                <li t-if="company.blz" class="list-inline-item"><small><strong>BLZ: </strong></small><span style="font-size:10px" t-field="company.blz"/></li>
                                <li t-if="company.account_no" class="list-inline-item"><small><strong>Kontonr.: </strong></small><span style="font-size:10px" t-field="company.account_no"/></li>
                                <li t-if="company.account_owner" class="list-inline-item"><small><strong>Kontoinhaber: </strong></small><span style="font-size:10px" t-field="company.account_owner"/></li>
                                <li t-if="company.bic" class="list-inline-item"><small><strong>BIC: </strong></small><span style="font-size:10px" t-field="company.bic"/></li>
                                <li t-if="company.iban_no" class="list-inline-item"><small><strong>IBAN: </strong></small><span style="font-size:10px" t-field="company.iban_no"/></li>
<!--                                <li t-if="company.vat" class="list-inline-item"><t t-esc="company.country_id.vat_label or 'Tax ID'"/>: <span style="font-size:10px" t-field="company.vat"/></li>-->
                            </ul>



<!--                            <ul class="list-inline mb4">
                                &lt;!&ndash; using the list-inline-item class from bootstrap causes weird behaviours in pdf report
                                     adding d-inline class fixes the problem&ndash;&gt;
                                <li t-if="company.phone" class="list-inline-item d-inline"><span t-field="company.phone"/></li>
                                <li t-if="company.email" class="list-inline-item d-inline"><span t-field="company.email"/></li>
                                <li t-if="company.website" class="list-inline-item d-inline"><span t-field="company.website"/></li>
                                <li t-if="company.vat" class="list-inline-item d-inline"><t t-esc="company.country_id.vat_label or 'Tax ID'"/>: <span t-field="company.vat"/></li>
                            </ul>-->

                            <div name="financial_infos">
                                <span t-field="company.report_footer"/>
                            </div>

                            <div t-if="report_type == 'pdf'" class="text-muted">
                                Page: <span class="page"/> / <span class="topage"/>
                            </div>
                        </div>
                    </div>

        </template>

        <template id="report_saleorder_document" inherit_id="sale.report_saleorder_document">
            <xpath expr="//div[@class='page']" position="replace">
               <div class="page">
                    <div class="oe_structure"/>
                    <div class="row">

                        <div class="col-6 offset-6 text-left mt-2">
                            <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                                <span style="text-align:left;width:100%"  t-if="doc.state not in ['draft','sent']"><strong>Order </strong></span>
                                <span style="text-align:left;width:100%"  t-if="doc.state in ['draft','sent']"><strong>Quotation </strong></span>
                            </t>
                            <t t-if="env.context.get('proforma', False) or is_pro_forma">
                                <span><strong>Pro-Forma Invoice </strong></span>
                            </t>
                        </div>
                    </div>

<!--                    <div class="row">
                        <div class="col-6 offset-6" >
                            <t t-if="doc.client_order_ref" class="col-auto mw-100 mb-2">
                            <span style="text-align:left;width:100%"  t-if="doc.client_order_ref">Your Reference: </span>
                            </t>
                            <span style="float:right" t-field="doc.client_order_ref"/>
                        </div>
                    </div>-->

                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                            <t t-if="doc.date_order and doc.state not in ['draft','sent']" class="col-auto mw-100 mb-2">
                            <span style="text-align:left;width:100%" t-if="doc.date_order">Order Date: </span>
                            <span style="float:right" t-field="doc.date_order"/>
                            </t>

                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                            <t t-if="doc.date_order and doc.state in ['draft','sent']" class="col-auto mw-100 mb-2">
                            <span  style="text-align:left;width:100%" t-if="doc.date_order">Quotation Date: </span>
                            <span  style="float:right" t-field="doc.date_order"/>
                            </t>

                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                            <t t-if="doc.validity_date and doc.state in ['draft', 'sent']" class="col-auto mw-100 mb-2" name="expiration_date">
                            <span style="text-align:left;width:100%" t-if="doc.validity_date">Expiration: </span>
                            <span style="float:right" t-field="doc.validity_date"/>
                            </t>

                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                            <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                                <span style="text-align:left;width:100%"  t-if="doc.state not in ['draft','sent']">Order </span>
                                <span style="text-align:left;width:100%"  t-if="doc.state in ['draft','sent']">Quotation </span>
                                <span style="float:right" t-field="doc.name"/>
                            </t>
                            <t t-if="env.context.get('proforma', False) or is_pro_forma">
                                <span>Pro-Forma Invoice </span>

                            </t>

                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                            <t  t-if="doc.partner_id" class="col-auto mw-100 mb-2">
                            <span style="text-align:left;width:100%" t-if="doc.partner_id">Customer No.: </span>
                            <span style="float:right"  t-field="doc.partner_id.id"/>
                            </t>

                        </div>
                    </div>

                    <div class="col-xs-12" style="height:20px;"></div>


<!--                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                            <t  t-if="doc.user_id.name" class="col-auto mw-100 mb-2">
                            <span style="text-align:left;width:100%" t-if="doc.user_id">Salesperson: </span>
                            </t>
                            <span style="float:right" t-field="doc.user_id"/>
                        </div>
                    </div>-->


<!--                     Is there a discount on at least one line? -->
                    <t t-set="display_discount" t-value="any(l.discount for l in doc.order_line)"/>

                    <table class="table table-sm o_main_table">
<!--                         In case we want to repeat the header, remove "display: table-row-group" -->
                        <thead style="display: table-row-group">
                            <tr>
                                <th name="th_img" class="text-center">Image</th>
                                <th name="th_description" class="text-left">Description</th>
                                <th name="th_quantity" class="text-right">Quantity</th>
                                <th name="th_priceunit" class="text-right">Unit Price</th>
                                <th name="th_discount" t-if="display_discount" class="text-right"
                                    groups="product.group_discount_per_so_line">
                                    <span>Disc.%</span>
                                </th>
                                <th name="th_taxes" class="text-right">Taxes</th>
                                <th name="th_subtotal" class="text-right">
                                    <span groups="account.group_show_line_subtotals_tax_excluded">Amount</span>
                                    <span groups="account.group_show_line_subtotals_tax_included">Total Price</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="sale_tbody">

                            <t t-set="current_subtotal" t-value="0"/>

                            <t t-foreach="doc.order_line" t-as="line">

                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"
                                   groups="account.group_show_line_subtotals_tax_excluded"/>
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_total"
                                   groups="account.group_show_line_subtotals_tax_included"/>

                                <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                    <t t-if="not line.display_type">

                                        <td style="width: 50px; height: 50px;"><span t-field="line.product_id.image_1920" t-options='{"widget": "image"}'/></td>

                                        <td name="td_name">
                                            <span t-field="line.name"/>
                                        </td>
                                        <td name="td_quantity" class="text-right">
                                            <span t-field="line.product_uom_qty"/>
                                            <span t-field="line.product_uom"/>
                                        </td>
                                        <td name="td_priceunit" class="text-right">
                                            <span t-field="line.price_unit"/>
                                        </td>
                                        <td t-if="display_discount" class="text-right"
                                            groups="product.group_discount_per_so_line">
                                            <span t-field="line.discount"/>
                                        </td>
                                        <td name="td_taxes" class="text-right">
                                            <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_id))"/>
                                        </td>
                                        <td name="td_subtotal" class="text-right o_price_total">
                                            <span t-field="line.price_subtotal"
                                                  groups="account.group_show_line_subtotals_tax_excluded"/>
                                            <span t-field="line.price_total"
                                                  groups="account.group_show_line_subtotals_tax_included"/>
                                        </td>
                                    </t>
                                    <t t-if="line.display_type == 'line_section'">
                                        <td name="td_section_line" colspan="99">
                                            <span t-field="line.name"/>
                                        </td>
                                        <t t-set="current_section" t-value="line"/>
                                        <t t-set="current_subtotal" t-value="0"/>
                                    </t>
                                    <t t-if="line.display_type == 'line_note'">
                                        <td name="td_note_line" colspan="99">
                                            <span t-field="line.name"/>
                                        </td>
                                    </t>
                                </tr>

                                <t t-if="current_section and (line_last or doc.order_line[line_index+1].display_type == 'line_section')">
                                    <tr class="is-subtotal text-right">
                                        <td name="td_section_subtotal" colspan="99">
                                            <strong class="mr16">Subtotal without VAT </strong>
                                            <span
                                                    t-esc="current_subtotal"
                                                    t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'
                                            />
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>

                    <div class="clearfix" name="so_total_summary">
                        <div id="total" class="row" name="total">
                            <div t-attf-class="#{'col-6' if report_type != 'html' else 'col-sm-7 col-md-6'} ml-auto">
                                <table class="table table-sm">
                                    <tr class="border-black o_subtotal" style="">
                                        <td name="td_amount_untaxed_label">
                                            <strong>Subtotal without VAT</strong>
                                        </td>
                                        <td name="td_amount_untaxed" class="text-right">
                                            <span t-field="doc.amount_untaxed"/>
                                        </td>
                                    </tr>
                                    <t t-foreach="doc.amount_by_group" t-as="amount_by_group">
                                        <tr style="">
                                            <t t-if="amount_by_group[5] == 1 and doc.amount_untaxed == amount_by_group[2]">
                                                <td name="td_amount_by_group_label_3">
                                                    <span t-esc="amount_by_group[0]"/>
                                                    <span>&amp;nbsp;<span>on</span>&amp;nbsp;
                                                        <t t-esc="amount_by_group[2]"
                                                           t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                                                    </span>
                                                </td>
                                                <td name="td_amount_by_group_3" class="text-right o_price_total">
                                                    <span t-esc="amount_by_group[1]"
                                                          t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                                                </td>
                                            </t>
                                            <t t-else="">
                                                <td name="td_amount_by_group_label">
                                                    <span t-esc="amount_by_group[0]"/>
                                                </td>
                                                <td name="td_amount_by_group" class="text-right o_price_total">
                                                    <span t-esc="amount_by_group[1]"
                                                          t-options='{"widget": "monetary", "display_currency": doc.pricelist_id.currency_id}'/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <tr class="border-black o_total">
                                        <td name="td_amount_total_label">
                                            <strong>Total CHF</strong>
                                        </td>
                                        <td name="td_amount_total" class="text-right">
                                            <span t-field="doc.amount_total"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div t-if="doc.signature" class="mt32 ml64 mr4" name="signature">
                        <div class="offset-8">
                            <strong>Signature</strong>
                        </div>
                        <div class="offset-8">
                            <img t-att-src="image_data_uri(doc.signature)" style="max-height: 4cm; max-width: 8cm;"/>
                        </div>
                        <div class="offset-8 text-center">
                            <p t-field="doc.signed_by"/>
                        </div>
                    </div>
<!--
                    <div class="oe_structure"/>

                    <p t-field="doc.note"/>
                    <p t-if="doc.payment_term_id.note">
                        <span t-field="doc.payment_term_id.note"/>
                    </p>
                    <p id="fiscal_position_remark" t-if="doc.fiscal_position_id and doc.fiscal_position_id.sudo().note">
                        <strong>Fiscal Position Remark:</strong>
                        <span t-field="doc.fiscal_position_id.sudo().note"/>
                    </p>-->
                </div>
            </xpath>
        </template>

        <template id="report_invoice_document" inherit_id="account.report_invoice_document">
            <xpath expr="//div[@class='page']" position="replace">
                <div class="page">
                    <div class="row">
                      <div class="col-6 offset-6 text-left mt-2">
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'out_invoice' and o.state == 'posted'"><strong>Invoice </strong></span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'out_invoice' and o.state == 'draft'"><strong>Draft Invoice </strong></span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'out_invoice' and o.state == 'cancel'"><strong>Cancelled Invoice </strong></span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'out_refund'"><strong>Credit Note </strong></span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'in_refund'"><strong>Vendor Credit Note </strong></span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'in_invoice'"><strong>Vendor Bill </strong></span>
<!--                        <span style="text-align:left;width:100%"  t-if="o.name != '/'" t-field="o.name"/>-->
<!--                        <span style="float:right" t-if="o.name != '/'" t-field="o.name"/>-->

                      </div>
                    </div>

                    <div class="row">
                      <div class="col-6 offset-6 text-left mt-2">
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'out_invoice' and o.state == 'posted'">Invoice No. </span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'out_refund'">Credit Note</span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'in_refund'">Vendor Credit Note </span>
                        <span style="text-align:left;width:100%"  t-if="o.move_type == 'in_invoice'">Vendor Bill </span>
<!--                        <span style="text-align:left;width:100%"  t-if="o.name != '/'" t-field="o.name"/>-->

                        <span style="float:right" t-if="o.name != '/'" t-field="o.name"/>

                      </div>
                    </div>


                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                                <span style="text-align:left;width:100%" t-if="o.invoice_date" name="invoice_date">Invoice Date:</span>
                            <span style="float:right" t-field="o.invoice_date"/>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                                <span style="text-align:left;width:100%" t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'" name="due_date">Due Date:</span>
                            <span style="float:right" t-field="o.invoice_date_due"/>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                                <span style="text-align:left;width:100%" t-if="o.invoice_origin" name="origin">Source:</span>
                            <span style="float:right" t-field="o.invoice_origin"/>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                                <span style="text-align:left;width:100%" t-if="o.partner_id.ref" name="customer_code">Customer Code:</span>
                            <span style="float:right" t-field="o.partner_id.ref"/>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6 offset-6 mt-2">
                                <span style="text-align:left;width:100%" t-if="o.ref" name="reference">Reference:</span>
                            <span style="float:right" t-field="o.ref"/>
                        </div>
                    </div>


                    <t t-set="display_discount" t-value="any(l.discount for l in o.invoice_line_ids)"/>

                    <table class="table table-sm o_main_table" name="invoice_line_table">
                        <thead>
                            <tr>
                                <th name="th_img" class="text-center">Image</th>
                                <th name="th_description" class="text-left"><span>Description</span></th>
                                <th name="th_quantity" class="text-right"><span>Quantity</span></th>
                                <th name="th_priceunit" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Unit Price</span></th>
                                <th name="th_price_unit" t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                    <span>Disc.%</span>
                                </th>
                                <th name="th_taxes" t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Taxes</span></th>
                                <th name="th_subtotal" class="text-right">
                                    <span groups="account.group_show_line_subtotals_tax_excluded">Amount</span>
                                    <span groups="account.group_show_line_subtotals_tax_included">Total Price</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="invoice_tbody">
                            <t t-set="current_subtotal" t-value="0"/>
                            <t t-set="lines" t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>

                            <t t-foreach="lines" t-as="line">
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                                <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                    <t t-if="not line.display_type" name="account_invoice_line_accountable">

                                        <td style="width: 50px; height: 50px;"><span t-field="line.product_id.image_1920" t-options='{"widget": "image"}'/></td>

                                        <td name="account_invoice_line_name"><span t-field="line.name" t-options="{'widget': 'text'}"/></td>
                                        <td class="text-right">
                                            <span t-field="line.quantity"/>
                                            <span t-field="line.product_uom_id"  groups="uom.group_uom"/>
                                        </td>
                                        <td t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span class="text-nowrap" t-field="line.price_unit"/>
                                        </td>
                                        <td t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span class="text-nowrap" t-field="line.discount"/>
                                        </td>
                                        <td t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))" id="line_tax_ids"/>
                                        </td>
                                        <td class="text-right o_price_total">
                                            <span class="text-nowrap" t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                            <span class="text-nowrap" t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                        </td>
                                    </t>
                                    <t t-if="line.display_type == 'line_section'">
                                        <td colspan="99">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                        </td>
                                        <t t-set="current_section" t-value="line"/>
                                        <t t-set="current_subtotal" t-value="0"/>
                                    </t>
                                    <t t-if="line.display_type == 'line_note'">
                                        <td colspan="99">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                        </td>
                                    </t>
                                </tr>

                                <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                    <tr class="is-subtotal text-right">
                                        <td colspan="99">
                                            <strong class="mr16">Subtotal without VAT </strong>
                                            <span
                                                t-esc="current_subtotal"
                                                t-options='{"widget": "monetary", "display_currency": o.currency_id}'
                                            />
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>

                    <div class="clearfix">
                        <div id="total" class="row">
                            <div t-attf-class="#{'col-6' if report_type != 'html' else 'col-sm-7 col-md-6'} ml-auto">
                                <table class="table table-sm" style="page-break-inside: avoid;">
                                    <tr class="border-black o_subtotal" style="">
                                        <td><strong>Subtotal without VAT </strong></td>
                                        <td class="text-right">
                                            <span t-field="o.amount_untaxed"/>
                                        </td>
                                    </tr>
                                    <t t-foreach="o.amount_by_group" t-as="amount_by_group">
                                        <tr style="">
                                            <t t-if="len(o.line_ids.filtered(lambda line: line.tax_line_id)) in [0, 1] and o.amount_untaxed == amount_by_group[2]">
                                                <td><span class="text-nowrap" t-esc="amount_by_group[0]"/></td>
                                                <td class="text-right o_price_total">
                                                    <span class="text-nowrap" t-esc="amount_by_group[3]" />
                                                </td>
                                            </t>
                                            <t t-else="">
                                                <td>
                                                    <span t-esc="amount_by_group[0]"/>
                                                    <span class="text-nowrap"> on
                                                        <t t-esc="amount_by_group[4]"/>
                                                    </span>
                                                </td>
                                                <td class="text-right o_price_total">
                                                    <span class="text-nowrap" t-esc="amount_by_group[3]"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <tr class="border-black o_total">
                                        <td><strong>Total CHF</strong></td>
                                        <td class="text-right">
                                            <span class="text-nowrap" t-field="o.amount_total"/>
                                        </td>
                                    </tr>
                                    <t t-if="print_with_payments">
                                        <t t-if="o.payment_state != 'invoicing_legacy'">
                                            <t t-set="payments_vals" t-value="o.sudo()._get_reconciled_info_JSON_values()"/>
                                            <t t-foreach="payments_vals" t-as="payment_vals">
                                                <tr>
                                                    <td>
                                                        <i class="oe_form_field text-right oe_payment_label">Paid on <t t-esc="payment_vals['date']" t-options='{"widget": "date"}'/></i>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="payment_vals['amount']" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                    </td>
                                                </tr>
                                            </t>
                                            <t t-if="len(payments_vals) > 0">
                                                <tr class="border-black">
                                                    <td><strong>Amount Due</strong></td>
                                                    <td class="text-right">
                                                        <span t-field="o.amount_residual"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </t>
                                    </t>
                                </table>
                            </div>
                        </div>
                    </div>
<!--                    <p t-if="o.move_type in ('out_invoice', 'in_refund') and o.payment_reference" name="payment_communication">
                        Please use the following communication for your payment : <b><span t-field="o.payment_reference"/></b>
                    </p>-->
                    <p t-if="o.invoice_payment_term_id" name="payment_term">
                        <span t-field="o.invoice_payment_term_id.note"/>
                    </p>
                    <p t-if="o.narration" name="comment">
                        <span t-field="o.narration"/>
                    </p>
                    <p t-if="o.fiscal_position_id.note" name="note">
                        <span t-field="o.fiscal_position_id.note"/>
                    </p>
                    <p t-if="o.invoice_incoterm_id" name="incoterm">
                        <strong>Incoterm: </strong><span t-field="o.invoice_incoterm_id.code"/> - <span t-field="o.invoice_incoterm_id.name"/>
                    </p>
                    <div id="qrcode" t-if="o.display_qr_code">
                        <p t-if="qr_code_urls.get(o.id)">
                            <strong class="text-center">Scan me with your banking app.</strong><br/><br/>
                            <img class="border border-dark rounded" t-att-src="qr_code_urls[o.id]"/>
                        </p>
                    </div>
                </div>
            </xpath>
        </template>

        <record id="report_layout_custom" model="report.layout">
            <field name="name">Custom</field>
            <field name="sequence">10</field>
            <field name="view_id" ref="eagle_templates.external_layout_custom"/>
            <field name="image">/eagle_template/static/img/preview_custom.png</field>
            <field name="pdf">/eagle_template/static/pdf/preview_custom.pdf</field>
        </record>


    <record id="view_res_company_extra_address_form" model="ir.ui.view">
        <field name="name">view_res_company_extra_address_form</field>
        <field name="model">res.company</field>
        <field name="inherit_id" ref="base.view_company_form"/>
         <field name="arch" type="xml">
            <xpath expr="//field[@name='country_id']" position="after">
                <field name="eu_vat_id_no" placeholder="EU-MwSt.-IdNr:"/>
                <field name="eu_vat_id_no_02" placeholder="EU-MwSt.-IdNr:"/>
                <field name="district_court" placeholder="Bezirksgericht"/>
                <field name="commercial_register" placeholder="Handelsregister:"/>
                <field name="bank_name" placeholder="Bank"/>
                <field name="blz" placeholder="BLZ:"/>
                <field name="account_no" placeholder="Kontonr:"/>
                <field name="account_owner" placeholder="Kontoinhaber:"/>
                <field name="bic" placeholder="BIC:"/>
                <field name="iban_no" placeholder="IBAN"/>
            </xpath>
        </field>
    </record>


   </data>
</swiss>